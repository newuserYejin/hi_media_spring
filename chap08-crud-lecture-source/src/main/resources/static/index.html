<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <h1 align="ceter">🍰Ohgiraffers Restaurant🍰</h1>
    <button onclick="location.href='/menu/list'">전체 메뉴 조희</button> <br>
    <button onclick="location.href='/menu/regist'">신규 메뉴 등록</button>
    <button onclick="location.href='/menu/join/list'">메뉴 카테고리 JOIN 조회</button>
    <button onclick="location.href='/menu/delete'">메뉴 코드로 메뉴 삭제</button>

    <hr>
    <form action="/menu/selectOne">
        <label for="searchCode">찾고 싶은 메뉴의 코드:</label>
        <input name="searchCode" id="searchCode" type="number" placeholder="숫자로 입력하세요" min="0">

        <input type="submit" value="찾아오기">
    </form>

    <label>데이터 찾아올 메뉴 코드: </label>
    <input type="number" min="1" id="liveNumber">

    <th:block>
        <p id="result">

        </p>
    </th:block>

    <script>
        const searchCode = document.querySelector("#liveNumber");
        const resultText = document.querySelector("#result");

        searchCode.addEventListener("change",()=>{

            const response = fetch(`/menu/liveSearch?searchCode=${searchCode.value}`)
                .then(res => res.json())
                .then(data =>{
                    console.log(data)
                    resultText.textContent = `메뉴코드 ${data.code}번의 메뉴는 ${data.name} 입니다.`;
                })
        })

    </script>

</body>
</html>